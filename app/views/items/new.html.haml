.Item__contents
  .Item__contents__container
    %p 商品画像 
    %p 10枚までアップロードできます
    = form_for @item do |f|
      .Item__input-form#item-image
        #previews
          - if @item.persisted?
            = @item.images.each_whith_index do |image, i|
              = image_tag image.src.url, date: { index: i }
        = f.fields_for :images do |i|
          %div.js-file_group{data: {index: "= image.index"}}
             
            = i.file_field :src, class: 'js-file'
            %span.js-remove
              削除
          - if @item.persisted?
            = image.check_box :_destroy, date:{ index: image.index }, class: 'hidden-destroy'
        -if @item.persisted?
          %div.js-file_group{data: {index: "= @item.images.count"}}
            = file_field_tag :src, name: 'item[images_attributes][#{@item.images.count}][src]', class: 'js-file'
            %span.js-remove
              削除
      %p 商品名
      = f.text_field :name, class: 'Item__input-form'
      %p 価格
      = f.text_field :price, class: 'Item__input-form'
      %p 商品説明
      = f.text_area :detail, size: '50x10', class: 'Item__input-form'
      %p 商品の状態
      = f.select :condition, [['新品、未使用'], ['未使用に近い'], ['目立った傷や汚れなし'], ['やや傷や汚れあり'], ['傷や汚れあり'], ['全体的に状態が悪い']], include_blank: '選択してください', size: '50x10', class: 'Item__input-form'

      .listing-form-box
        .listing-product-detail__category
          = f.label 'カテゴリー', class: 'listing-default__label'
          %span.listing-default--require 必須
          .listing-select-wrapper
            .listing-select-wrapper__box
              = f.select :category_id, @category_parent_array, {}, {class: 'listing-select-wrapper__box--select', id: 'parent_category'}
              %i.fas.fa-chevron-down.listing-select-wrapper__box--arrow-down

      %p ブランド
      = f.text_field :brand, class: 'Item__input-form'
      %p サイズ
      = f.collection_select :size_id, Size.all, :id, :name, include_blank: '選択してください', class: 'Item__input-form'
      -# %p ユーザー仮
      -# = f.text_field :user_id, class: 'Item__input-form'
      %p 発送について
      = f.fields_for :shipping do |s|
        %p 発送方法
        = s.select :method, [['未定'], ['らくらくメルカリ便'], ['ゆうゆうメルカリ便'],['ゆうメール'],['レターパック'],['普通郵便(定型、不定型)'],['クロネコヤマト'],['ゆうパック'],['クリックポスト'], ['ゆうパケット']], class: 'Item__input-form'
        %p 発送元
        = s.collection_select :prefecture_from, Prefecture.all, :id, :name, include_blank: '選択してください', class: 'Item__input-form'
        %p 発送までの日数
        = s.select :period_before_shipping, [['1〜2日で発送'], ['2〜3日で発送'], ['4〜7日で発送']], include_blank: '選択してください', class: 'Item__input-form'
        %p 送料負担
        = s.select :fee_burden, [['送料込み (出品者負担)'], ['着払い(購入者負担)']], include_blank: '選択してください', class: 'Item__input-form'
      
      = f.submit 
